webpackJsonp([1],{"6vOd":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),o=a("zL8q"),n=a.n(o),i=a("zNUS"),l=a.n(i),c=l.a.Random;var s=[{id:c.id(),name:"玉米",categoryDescription:"甜甜的",parentId:101,category:"蔬菜"},{id:c.id(),name:"梨子",categoryDescription:"香甜可口",parentId:102,category:"水果"},{id:c.id(),name:"猪肉",categoryDescription:"最喜欢吃的",parentId:103,category:"肉类"},{id:c.id(),name:"大米",categoryDescription:"一顿不吃都不行",parentId:104,category:"粮食"},{id:c.id(),name:"菜籽油",categoryDescription:"家家户户必备",parentId:105,category:"油类"}],d=function(e){var t,a,r=(t=e.url,(a=t.split("?")[1])?JSON.parse('{"'+decodeURIComponent(a).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{}),o=r.name,n=void 0===o?"":o,i=r.currentPage,l=void 0===i?1:i,c=r.parentId,d=void 0===c?"":c,p=r.pageSize,u=void 0===p?10:p,m=decodeURIComponent(n),f=s.filter(function(e){return!d||0==d||e.parentId==d}).filter(function(e){return!m||-1!==e.name.indexOf(m)}),g=f.filter(function(e,t){return t<u*l&&t>=u*(l-1)});return{code:200,paginator:{currentPage:Number(l),pageSize:Number(u),totalRecord:f.length},data:g}},p=function(e){var t=JSON.parse(e.body),a=t.parentId,r=t.category,o=void 0===r?"":r,n=t.name,i=t.categoryDescription;return s.unshift({id:c.id(),parentId:a,category:""===o?"全部父类别":o,name:n,categoryDescription:i}),{code:200,ret:!0}},u=function(e){var t=JSON.parse(e.body).id;return t?(s=s.filter(function(e){return e.id!==t}),{code:200,ret:!0}):{code:-999,message:"参数不正确"}},m=function(e){var t=JSON.parse(e.body),a=t.id,r=t.parentId,o=t.name,n=t.categoryDescription,i=t.category,l=void 0===i?"":i;return s.some(function(e){if(e.id===a)return e.parentId=r,e.name=o,e.categoryDescription=n,e.category=""===l?"全部父类别":l,!0}),{code:200,ret:!0}};l.a.mock(/\/goods\/category/,"get",d),l.a.mock(/\/goods\/remove/,"post",u),l.a.mock(/\/goods\/add/,"post",p),l.a.mock(/\/goods\/edit/,"put",m);a("tvR6");var f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var g=a("VU/8")({name:"App"},f,!1,function(e){a("gsu9")},null,null).exports,v=a("/ocq"),_=a("Dd8w"),y=a.n(_),b=a("mtWM"),h=a.n(b),D={name:"Home",data:function(){return{categoryName:"",parentId:"0",paginator:{},addDialog:!1,editDialog:!1,parentCategory:[],tableData:[],add_form:{parentId:"0",name:"",categoryDescription:""},edit_form:{id:0,parentId:"0",name:"",categoryDescription:""},rules:{name:[{required:!0,message:"请输入类别名称",trigger:"blur"}],categoryDescription:[{required:!0,message:"请输入类别描述",trigger:"blur"}]}}},created:function(){var e=this,t={delete:!1,pageSize:10,currentPage:1,orderSegment:"created_time.desc"};h.a.get("/goods/category",{params:t}).then(function(t){var a=[];t.data.data.map(function(t){e.parentCategory.length,a.push({id:t.parentId,name:0===t.parentId?"全部父类别":t.category})});var r=e.arrayUnique(a,"id");e.parentCategory=r}),this.requestList(t)},methods:{arrayUnique:function(e,t){var a={};return e.reduce(function(e,r){return!a[r[t]]&&(a[r[t]]=e.push(r)),e},[])},requestList:function(e){var t=this;h.a.get("/goods/category",{params:e}).then(function(e){t.tableData=e.data.data,t.paginator=e.data.paginator||{totalRecord:0}})},changeCategor:function(e){this.parentId=e},add:function(e){var t=this;this.$refs.add_form.validate(function(e){if(!e)return!1;t.parentCategory.forEach(function(e){e.id===t.add_form.parentId&&(t.add_form.category=e.name)});var a=t.add_form;h.a.post("/goods/add",a).then(function(){t.addDialog=!1,o.Notification.success({title:"成功",message:"成功新增食品类别！"});var e={pageSize:t.paginator.pageSize,currentPage:t.paginator.currentPage};t.requestList(e),t.add_form={parentId:"0",name:"",categoryDescription:""}})})},closeAddDialog:function(){this.addDialog=!1,this.add_form={parentId:"0",name:"",categoryDescription:""}},Pagination:function(e){var t={currentPage:e,pageSize:this.paginator.pageSize};this.requestList(t)},openMesBox:function(e){var t=this;this.$confirm("此操作将永久删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.handleClick(e),t.$message({type:"success",message:"删除成功!"})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleClick:function(e){var t=this,a=e.id;h.a.post("/goods/remove",{id:a}).then(function(){e.visible=!1;var a=y()({},t.paginator);t.requestList(a)})},search:function(){var e={name:this.categoryName,parentId:0===this.parentId?"":this.parentId};this.requestList(e)},openEditDialog:function(e){this.editDialog=!0,this.edit_form=e},edit:function(e){var t=this;this.$refs.edit_form.validate(function(e){if(!e)return!1;t.parentCategory.forEach(function(e){e.id===t.edit_form.parentId&&(t.edit_form.category=e.name)});var a=t.edit_form;h.a.put("/goods/edit",a).then(function(e){t.editDialog=!1,o.Notification.success({title:"成功",message:"成功更新食品类别！"});var a={pageSize:t.paginator.pageSize,currentPage:t.paginator.currentPage};t.requestList(a),t.edit_form={id:0,parentId:"0",name:"",categoryDescription:""}})})}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"home_form"},[a("el-form",{staticClass:"form",attrs:{inline:!0,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"类别名称:"}},[a("el-input",{attrs:{placeholder:"请输入类别名称",clearable:""},model:{value:e.categoryName,callback:function(t){e.categoryName="string"==typeof t?t.trim():t},expression:"categoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父类别:"}},[a("el-select",{attrs:{placeholder:"请选择父类别"},on:{change:function(t){return e.changeCategor(e.parentId)}},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}},[a("el-option",{attrs:{label:"全部父类别",value:"0"}}),e._v(" "),e._l(e.parentCategory,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[a("i",{staticClass:"el-icon-search"},[e._v(" 查询")])])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"info"},on:{click:function(t){e.addDialog=!0}}},[a("i",{staticClass:"el-icon-plus"},[e._v(" 添加")])])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增食品类别",visible:e.addDialog,width:"30%"},on:{"update:visible":function(t){e.addDialog=t}}},[a("span",[a("el-form",{ref:"add_form",staticClass:"add_form",attrs:{model:e.add_form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"父类别:",prop:"parentId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择父类别"},model:{value:e.add_form.parentId,callback:function(t){e.$set(e.add_form,"parentId",t)},expression:"add_form.parentId"}},[a("el-option",{attrs:{label:"全部父类别",value:"0"}}),e._v(" "),e._l(e.parentCategory,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"类别名称:",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.add_form.name,callback:function(t){e.$set(e.add_form,"name",t)},expression:"add_form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别描述:",prop:"categoryDescription"}},[a("el-input",{attrs:{clearable:""},model:{value:e.add_form.categoryDescription,callback:function(t){e.$set(e.add_form,"categoryDescription",t)},expression:"add_form.categoryDescription"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeAddDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add(e.add_form)}}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"home_table"},[a("el-table",{staticClass:"table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"category",label:"父类别名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"类别名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryDescription",label:"类别描述"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.openEditDialog(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.openMesBox(t.row)}}},[e._v("移除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"更新食品类别",visible:e.editDialog,width:"30%"},on:{"update:visible":function(t){e.editDialog=t}}},[a("span",[a("el-form",{ref:"edit_form",staticClass:"edit_form",attrs:{model:e.edit_form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"父类别:",prop:"parentId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择父类别"},model:{value:e.edit_form.parentId,callback:function(t){e.$set(e.edit_form,"parentId",t)},expression:"edit_form.parentId"}},[a("el-option",{attrs:{label:"全部父类别",value:"0"}}),e._v(" "),e._l(e.parentCategory,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"类别名称:",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别描述:",prop:"categoryDescription"}},[a("el-input",{attrs:{clearable:""},model:{value:e.edit_form.categoryDescription,callback:function(t){e.$set(e.edit_form,"categoryDescription",t)},expression:"edit_form.categoryDescription"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.edit(e.edit_form)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-pagination",{attrs:{"current-page":e.paginator.currentPage,"page-size":e.paginator.pageSize,total:e.paginator.totalRecord,layout:"total, prev, pager, next"},on:{"current-change":e.Pagination,"update:currentPage":function(t){return e.$set(e.paginator,"currentPage",t)},"update:current-page":function(t){return e.$set(e.paginator,"currentPage",t)}}})],1)},staticRenderFns:[]};var k=a("VU/8")(D,I,!1,function(e){a("6vOd")},null,null).exports;r.default.use(v.a);var C=new v.a({routes:[{path:"/",name:"Home",component:k}]});r.default.config.productionTip=!1,r.default.use(n.a),new r.default({el:"#app",router:C,components:{App:g},template:"<App/>",render:function(e){return e(g)}}).$mount("#app")},gsu9:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.67d05eef4ae21015649e.js.map